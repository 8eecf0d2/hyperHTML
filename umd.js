(function(A,G){if(typeof define=='function'&&define.amd)define([],G);else if(typeof module=='object'&&module.exports)module.exports=G();else A.hyperHTML=G()}(typeof self!='undefined'?self:this,function(){
/*! (c) Andrea Giammarchi (ISC) */var hyperHTML=function(e){"use strict";var t=document.defaultView,r=/^area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr$/i,l="ownerSVGElement",c="http://www.w3.org/2000/svg",s="connected",f="dis"+s,d=/^style|textarea$/i,b="_hyper: "+(Math.random()*new Date|0)+";",h="\x3c!--"+b+"--\x3e",v=t.Event;try{new v("Event")}catch(e){v=function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}}var n,i=t.Map||function(){var n=[],r=[];return{get:function(e){return r[n.indexOf(e)]},set:function(e,t){r[n.push(e)-1]=t}}},o=0,p=t.WeakMap||function(){var n=b+o++;return{get:function(e){return e[n]},set:function(e,t){Object.defineProperty(e,n,{configurable:!0,value:t})}}},a=t.WeakSet||function(){var t=new p;return{add:function(e){t.set(e,!0)},has:function(e){return!0===t.get(e)}}},u=Array.isArray||(n={}.toString,function(e){return"[object Array]"===n.call(e)}),m=b.trim||function(){return this.replace(/^\s+|\s+$/g,"")};function g(){return this}var w=function(e,t){var n="_"+e+"$";return{get:function(){return this[n]||(this[e]=t.call(this,e))},set:function(e){Object.defineProperty(this,n,{configurable:!0,value:e})}}},y={},N=[],x=y.hasOwnProperty,E=0,C=function(e,t){e in y||(E=N.push(e)),y[e]=t},j=function(e,t){for(var n=0;n<E;n++){var r=N[n];if(x.call(e,r))return y[r](e[r],t)}},A=function(e,t){return S(e).createElement(t)},S=function(e){return e.ownerDocument||e},T=function(e){return S(e).createDocumentFragment()},L=function(e,t){return S(e).createTextNode(t)},k=" \\f\\n\\r\\t",O="[^ "+k+"\\/>\"'=]+",M="[ "+k+"]+"+O,D="<([A-Za-z]+[A-Za-z0-9:_-]*)((?:",$="(?:=(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|"+O+"))?)",P=new RegExp(D+M+$+"+)([ "+k+"]*/?>)","g"),B=new RegExp(D+M+$+"*)([ "+k+"]*/>)","g"),R=T(document),H="append"in R,_="content"in A(document,"template");R.appendChild(L(R,"g")),R.appendChild(L(R,""));var F=1===R.cloneNode(!0).childNodes.length,Z="importNode"in document,z=H?function(e,t){e.append.apply(e,t)}:function(e,t){for(var n=t.length,r=0;r<n;r++)e.appendChild(t[r])},I=new RegExp("("+M+"=)(['\"]?)"+h+"\\2","gi"),V=function(e,t,n,r){return"<"+t+n.replace(I,W)+r},W=function(e,t,n){return t+(n||'"')+b+(n||'"')},q=function(e,t){return(l in e?Y:X)(e,t.replace(P,V))},G=F?function(e){for(var t=e.cloneNode(),n=e.childNodes||[],r=n.length,i=0;i<r;i++)t.appendChild(G(n[i]));return t}:function(e){return e.cloneNode(!0)},J=Z?function(e,t){return e.importNode(t,!0)}:function(e,t){return G(t)},K=[].slice,Q=function(e){return U(e)},U=function(e){if(e.propertyIsEnumerable("raw")||/Firefox\/(\d+)/.test((t.navigator||{}).userAgent)&&parseFloat(RegExp.$1)<55){var n={};U=function(e){var t="_"+e.join(b);return n[t]||(n[t]=e)}}else U=function(e){return e};return U(e)},X=_?function(e,t){var n=A(e,"template");return n.innerHTML=t,n.content}:function(e,t){var n=A(e,"template"),r=T(e);if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(t)){var i=RegExp.$1;n.innerHTML="<table>"+t+"</table>",z(r,K.call(n.querySelectorAll(i)))}else n.innerHTML=t,z(r,K.call(n.childNodes));return r},Y=_?function(e,t){var n=T(e),r=S(e).createElementNS(c,"svg");return r.innerHTML=t,z(n,K.call(r.childNodes)),n}:function(e,t){var n=T(e),r=A(e,"div");return r.innerHTML='<svg xmlns="'+c+'">'+t+"</svg>",z(n,K.call(r.firstChild.childNodes)),n};function ee(e){this.childNodes=e,this.length=e.length,this.first=e[0],this.last=e[this.length-1]}ee.prototype.insert=function(){var e=T(this.first);return z(e,this.childNodes),e},ee.prototype.remove=function(){var e=this.first,t=this.last;if(2===this.length)t.parentNode.removeChild(t);else{var n=S(e).createRange();n.setStartBefore(this.childNodes[1]),n.setEndAfter(t),n.deleteContents()}return e};var te=function(e,t,n){e.unshift(e.indexOf.call(t.childNodes,n))},ne=function(e,t,n){return{type:e,name:n,node:t,path:function(e){var t=[],n=void 0;switch(e.nodeType){case 1:case 11:n=e;break;case 8:n=e.parentNode,te(t,n,e);break;default:n=e.ownerElement}for(e=n;n=n.parentNode;e=n)te(t,n,e);return t}(t)}},re=function(e,t){for(var n=t.length,r=0;r<n;r++)e=e.childNodes[t[r]];return e},ie=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,oe=function(o,a){var u=void 0,l=void 0;return function(e){switch(typeof e){case"object":if(e){if("object"===u){if(!a&&l!==e)for(var t in l)t in e||(o[t]="")}else a?o.value="":o.cssText="";var n=a?{}:o;for(var r in e){var i=e[r];n[r]="number"!=typeof i||ie.test(r)?i:i+"px"}u="object",a?o.value=le(l=n):l=e;break}default:l!=e&&(u="string",l=e,a?o.value=e||"":o.cssText=e||"")}}},ae=/([^A-Z])([A-Z]+)/g,ue=function(e,t,n){return t+"-"+n.toLowerCase()},le=function(e){var t=[];for(var n in e)t.push(n.replace(ae,ue),":",e[n],";");return t.join("")},ce=function(e){return e},se=function(e,t,n){var r=e.ownerDocument.createRange();r.setStartBefore(t),r.setEndAfter(n),r.deleteContents()},fe=function(e,t,n,r,i){for(var o=r||ce,a=null==i?null:o(i,0),u=0,l=0,c=t.length-1,s=t[0],f=t[c],d=n.length-1,h=n[0],v=n[d];u<=c&&l<=d;)if(null==s)s=t[++u];else if(null==f)f=t[--c];else if(null==h)h=n[++l];else if(null==v)v=n[--d];else if(s==h)s=t[++u],h=n[++l];else if(f==v)f=t[--c],v=n[--d];else if(s==v)e.insertBefore(o(s,1),o(f,-0).nextSibling),s=t[++u],v=n[--d];else if(f==h)e.insertBefore(o(f,1),o(s,0)),f=t[--c],h=n[++l];else{var p=t.indexOf(h);if(p<0)e.insertBefore(o(h,1),o(s,0)),h=n[++l];else{for(var m=p,g=l;m<=c&&g<=d&&t[m]===n[g];)m++,g++;if(1<m-p)--p===u?e.removeChild(o(s,-1)):se(e,o(s,-1),o(t[p],-1)),l=g,s=t[u=m],h=n[g];else{var b=t[p];t[p]=null,e.insertBefore(o(b,1),o(s,0)),h=n[++l]}}}if(u<=c||l<=d)if(c<u){var w=n[d+1],y=null==w?a:o(w,0);if(l===d)e.insertBefore(o(n[l],1),y);else{for(var N=e.ownerDocument.createDocumentFragment();l<=d;)N.appendChild(o(n[l++],1));e.insertBefore(N,y)}}else null==t[u]&&u++,u===c?e.removeChild(o(t[u],-1)):se(e,o(t[u],-1),o(t[c],-1));return n},de=new a;function he(){}he.prototype=Object.create(null);var ve=function(e){return{html:e}},pe=function e(t,n){return"ELEMENT_NODE"in t?t:t.constructor===ee?1/n<0?n?t.remove():t.last:n?t.insert():t.first:e(t.render(),n)},me=function(e,t,n){for(var r=new he,i=e.attributes,o=K.call(i),a=[],u=o.length,l=0;l<u;l++){var c=o[l];if(c.value===b){var s=c.name;if(!(s in r)){var f=n.shift().replace(/^(?:|[\S\s]*?\s)(\S+?)=['"]?$/,"$1");r[s]=i[f]||i[f.toLowerCase()],t.push(ne("attr",r[s],f))}a.push(c)}}for(var d=a.length,h=0;h<d;h++){var v=a[h];/^id$/i.test(v.name)?e.removeAttribute(v.name):e.removeAttributeNode(a[h])}var p=e.nodeName;if(/^script$/i.test(p)){for(var m=document.createElement(p),g=0;g<i.length;g++)m.setAttributeNode(i[g].cloneNode(!0));m.textContent=e.textContent,e.parentNode.replaceChild(m,e)}},ge=function(e,t){t(e.placeholder),"text"in e?Promise.resolve(e.text).then(String).then(t):"any"in e?Promise.resolve(e.any).then(t):"html"in e?Promise.resolve(e.html).then(ve).then(t):Promise.resolve(j(e,t)).then(t)},be=function(e){return null!=e&&"then"in e},we=function(r,i){var o=!1,a=void 0;return function e(t){switch(typeof t){case"string":case"number":case"boolean":o?a!==t&&(a=t,i[0].textContent=t):(o=!0,a=t,i=fe(r.parentNode,i,[L(r,t)],pe,r));break;case"object":case"undefined":if(null==t){o=!1,i=fe(r.parentNode,i,[],pe,r);break}default:if(o=!1,u(a=t))if(0===t.length)i.length&&(i=fe(r.parentNode,i,[],pe,r));else switch(typeof t[0]){case"string":case"number":case"boolean":e({html:t});break;case"object":if(u(t[0])&&(t=t.concat.apply([],t)),be(t[0])){Promise.all(t).then(e);break}default:i=fe(r.parentNode,i,t,pe,r)}else"ELEMENT_NODE"in(n=t)||n instanceof ee||n instanceof g?i=fe(r.parentNode,i,11===t.nodeType?K.call(t.childNodes):[t],pe,r):be(t)?t.then(e):"placeholder"in t?ge(t,e):"text"in t?e(String(t.text)):"any"in t?e(t.any):"html"in t?i=fe(r.parentNode,i,K.call(q(r,[].concat(t.html).join("")).childNodes),pe,r):e("length"in t?K.call(t):j(t,e))}var n}},ye=function(t,n,e){var r=l in t,i=void 0;if("style"===n)return function(e,t,n){if(n){var r=t.cloneNode(!0);return r.value="",e.setAttributeNode(r),oe(r,n)}return oe(e.style,n)}(t,e,r);if(/^on/.test(n)){var o=n.slice(2);return o===s||o===f?(Ee&&(Ee=!1,function(){var i=function(e,t){for(var n=new v(t),r=e.length,i=0;i<r;i++){var o=e[i];1===o.nodeType&&a(o,n)}},a=function e(t,n){de.has(t)&&t.dispatchEvent(n);for(var r=t.children,i=r.length,o=0;o<i;o++)e(r[o],n)};try{new MutationObserver(function(e){for(var t=e.length,n=0;n<t;n++){var r=e[n];i(r.removedNodes,f),i(r.addedNodes,s)}}).observe(document,{subtree:!0,childList:!0})}catch(e){document.addEventListener("DOMNodeRemoved",function(e){i([e.target],f)},!1),document.addEventListener("DOMNodeInserted",function(e){i([e.target],s)},!1)}}()),de.add(t)):n.toLowerCase()in t&&(o=o.toLowerCase()),function(e){i!==e&&(i&&t.removeEventListener(o,i,!1),(i=e)&&t.addEventListener(o,e,!1))}}if("data"===n||!r&&n in t)return function(e){i!==e&&(i=e,t[n]!==e&&null==(t[n]=e)&&t.removeAttribute(n))};var a=!1,u=e.cloneNode(!0);return function(e){i!==e&&(i=e,u.value!==e&&(null==e?(a&&(a=!1,t.removeAttributeNode(u)),u.value=e):(u.value=e,a||(a=!0,t.setAttributeNode(u)))))}},Ne=function(n){var r=void 0;return function e(t){r!==t&&("object"==typeof(r=t)&&t?be(t)?t.then(e):"placeholder"in t?ge(t,e):e("text"in t?String(t.text):"any"in t?t.any:"html"in t?[].concat(t.html).join(""):"length"in t?K.call(t).join(""):j(t,e)):n.textContent=null==t?"":t)}},xe={create:function(e,t){for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i],a=re(e,o.path);switch(o.type){case"any":n.push(we(a,[]));break;case"attr":n.push(ye(a,o.name,o.node));break;case"text":n.push(Ne(a)),a.textContent=""}}return n},find:function e(t,n,r){for(var i=t.childNodes,o=i.length,a=0;a<o;a++){var u=i[a];switch(u.nodeType){case 1:me(u,n,r),e(u,n,r);break;case 8:u.textContent===b&&(r.shift(),n.push(d.test(t.nodeName)?ne("text",t):ne("any",u)));break;case 3:d.test(t.nodeName)&&m.call(u.textContent)===h&&(r.shift(),n.push(ne("text",t)))}}}},Ee=!0;var Ce=new p,je=new i;function Ae(e){var t=Ce.get(this);return t&&t.template===Q(e)?Se.apply(t.updates,arguments):function(e){e=Q(e);var t=je.get(e)||function(e){var t=[],n=e.join(h).replace(Me,De),r=q(this,n);xe.find(r,t,e.slice());var i={fragment:r,paths:t};return je.set(e,i),i}.call(this,e),n=J(this.ownerDocument,t.fragment),r=xe.create(n,t.paths);Ce.set(this,{template:e,updates:r}),Se.apply(r,arguments),this.textContent="",this.appendChild(n)}.apply(this,arguments),this}function Se(){for(var e=arguments.length,t=1;t<e;t++)this[t-1](arguments[t])}var Te,Le,ke,Oe,Me=B,De=function(e,t,n){return r.test(t)?e:"<"+t+n+"></"+t+">"},$e=new p,Pe=function(n){var r=void 0,i=void 0,o=void 0,a=void 0,u=void 0;return function(e){e=Q(e);var t=a!==e;return t&&(a=e,o=T(document),i="svg"===n?document.createElementNS(c,"svg"):o,u=Ae.bind(i)),u.apply(null,arguments),t&&("svg"===n&&z(o,K.call(i.childNodes)),r=Re(o)),r}},Be=function(e,t){var n=t.indexOf(":"),r=$e.get(e),i=t;return-1<n&&(i=t.slice(n+1),t=t.slice(0,n)||"html"),r||$e.set(e,r={}),r[i]||(r[i]=Pe(t))},Re=function(e){for(var t=e.childNodes,n=t.length,r=[],i=0;i<n;i++){var o=t[i];1!==o.nodeType&&0===m.call(o.textContent).length||r.push(o)}return 1===r.length?r[0]:new ee(r)},He=C;function _e(e){return arguments.length<2?null==e?Pe("html"):"string"==typeof e?_e.wire(null,e):"raw"in e?Pe("html")(e):"nodeType"in e?_e.bind(e):Be(e,"html"):("raw"in e?Pe("html"):_e.wire).apply(null,arguments)}return _e.Component=g,_e.bind=function(e){return Ae.bind(e)},_e.define=He,_e.diff=fe,(_e.hyper=_e).wire=function(e,t){return null==e?Pe(t||"html"):Be(e,t||"html")},Te=Pe,Le=new p,ke=Object.create,Oe=function(e,t){var n={w:null,p:null};return t.set(e,n),n},Object.defineProperties(g,{for:{configurable:!0,value:function(e,t){return function(e,t,n,r){var i,o,a,u=t.get(e)||Oe(e,t);switch(typeof r){case"object":case"function":var l=u.w||(u.w=new p);return l.get(r)||(i=l,o=r,a=new e(n),i.set(o,a),a);default:var c=u.p||(u.p=ke(null));return c[r]||(c[r]=new e(n))}}(this,Le.get(e)||(n=e,r=new i,Le.set(n,r),r),e,null==t?"default":t);var n,r}}}),Object.defineProperties(g.prototype,{handleEvent:{value:function(e){var t=e.currentTarget;this["getAttribute"in t&&t.getAttribute("data-call")||"on"+e.type](e)}},html:w("html",Te),svg:w("svg",Te),state:w("state",function(){return this.defaultState}),defaultState:{get:function(){return{}}},setState:{value:function(e,t){var n=this.state,r="function"==typeof e?e.call(this,n):e;for(var i in r)n[i]=r[i];return!1!==t&&this.render(),this}}}),_e}(window);
return hyperHTML}));
